# RedNote Extract - 小红书功能扩展

一个简单的浏览器扩展，为小红书（Xiaohongshu）用户提供便捷的内容下载和提取功能。

## ★ 主要功能

### 相机 媒体文件下载

- **图片下载**：一键下载笔记中的所有图片，自动获取原始高清质量
- **视频下载**：支持笔记中的视频内容下载
- **批量打包**：将所有媒体文件打包为ZIP文件下载
- **单文件下载**：支持单独下载指定的图片或视频

### 文档 文本内容提取

- **笔记标题**：自动提取笔记标题信息
- **作者信息**：显示并支持一键复制作者名称
- **正文内容**：完整提取笔记的文字内容
- **文本下载**：将完整笔记内容保存为TXT文件

### 📊 扩展内容分析

- **字数统计**：精确统计笔记字数和字符数
- **评论提取**：智能提取评论内容，包括作者、回复、点赞数
- **地区信息**：显示评论者IP所在地区
- **数据导出**：支持TXT和JSON格式的完整数据导出

### 目标 智能识别

- **页面类型检测**：自动识别笔记详情页和用户主页
- **内容过滤**：智能过滤掉头像、图标等非内容图片
- **懒加载处理**：完美兼容页面懒加载机制

## 未来可能添加功能

- [ ] **Firefox 扩展**: 开发 Firefox 版本
- [ ] **Safari 扩展**: 开发 Safari 版本
- [ ] **用户主页功能扩展**: 完善用户主页 (`/user/profile/{userId}`) 的内容提取功能
- [ ] **批量笔记下载**: 支持下载用户主页的所有笔记内容
- [ ] **用户信息提取**: 提取用户简介、粉丝数等基本信息
- [ ] **搜索结果页面**: 支持搜索结果页面 (`/search_result`) 的内容提取
- [ ] **批量操作**: 支持选择多个笔记进行批量下载
- [ ] **搜索条件保存**: 记住用户搜索偏好
- [ ] **水印去除**: 智能去除图片水印功能
- [ ] **图片格式转换**: 支持将图片转换为不同格式 (JPG/PNG/WebP)
- [ ] **视频质量选择**: 提供多种视频质量选项下载
- [ ] **音频提取**: 从视频中提取音频文件

## 快速开始

### 安装要求

- Chrome 浏览器 88+ 或基于 Chromium 的浏览器
- 支持 Manifest V3 的扩展环境

### 开发环境设置

1. **克隆项目**

   ```bash
   git clone <repository-url>
   cd rednote-extract
   ```

2. **安装依赖**

   ```bash
   pnpm install
   ```

3. **开发模式**

   ```bash
   pnpm dev
   ```

4. **构建生产版本**

   ```bash
   pnpm build
   ```

5. **代码质量检查**

   ```bash
   pnpm check        # 检查代码质量
   pnpm check:fix    # 自动修复问题
   pnpm lint         # 仅运行 linter
   pnpm format       # 仅运行格式化
   ```

### 加载扩展

1. 打开 Chrome 浏览器，访问 `chrome://extensions/`
2. 开启"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择项目的 `.output/chrome-mv3` 目录

## 使用方法

### 在笔记详情页使用

1. **打开小红书笔记详情页**
   - 访问任意小红书笔记链接，如：`https://www.xiaohongshu.com/explore/xxxxxx`

2. **启动扩展**
   - 点击浏览器工具栏中的扩展图标
   - 扩展会自动检测页面类型并显示相应功能

3. **查看笔记信息**
   - 扩展弹窗会显示作者名称
   - 点击复制按钮可复制作者名到剪贴板
   - 点击"下载文本内容"可下载完整笔记文本

4. **提取扩展内容**
   - 点击"提取字数和评论"按钮获取详细信息
   - 查看字数统计、字符数统计和评论数量
   - 预览前3条评论内容，包括作者、点赞数、地区信息
   - 支持下载完整内容（TXT格式）或结构化数据（JSON格式）

5. **下载媒体文件**
   - 查看检测到的图片和视频数量
   - 点击单个文件的"下载"按钮下载指定文件
   - 点击"打包下载所有文件"批量下载并打包为ZIP

### 功能界面说明

```text
┌─────────────────────────────┐
│        笔记内容              │
├─────────────────────────────┤
│ 作者: 硅基解码  [复制]       │
│ [下载文本内容] [提取字数和评论] │
├─────────────────────────────┤
│        扩展信息              │
│ 📊 字数: 1024  字符: 1580   │
│ 💬 评论: 15                 │
├─────────────────────────────┤
│      评论预览                │
│ 👤 用户A: 很有用的教程！      │
│ 👤 用户B: 学到了，感谢分享    │
│ 👤 用户C: 请问有详细步骤吗？  │
│ [下载完整内容] [下载JSON]     │
├─────────────────────────────┤
│        媒体文件              │
│ 图片: 16                    │
├─────────────────────────────┤
│ [图片] image_1.webp   [下载]  │
│ [图片] image_2.webp   [下载]  │
│ ...                         │
├─────────────────────────────┤
│    [打包下载所有文件]        │
└─────────────────────────────┘
```

## 技术架构

### 核心技术栈

- **开发框架**: WXT (Web Extension Tools)
- **UI 框架**: React 19 + TypeScript
- **构建工具**: Vite
- **代码质量**: Biome (Linting + Formatting)
- **打包库**: JSZip

### 项目结构

```text
rednote-extract/
├── components/           # React 组件
│   ├── NotePagePopup.tsx    # 笔记页面弹窗组件
│   └── ProfilePagePopup.tsx # 用户主页弹窗组件
├── entrypoints/         # 扩展入口点
│   ├── content.ts           # 内容脚本
│   └── popup/              # 弹窗页面
├── utils/               # 工具函数
│   ├── downloader.ts        # 下载核心逻辑
│   └── pageDetector.ts      # 页面检测
├── docs/                # 技术文档
└── public/              # 静态资源
```

### 关键特性

- **Manifest V3**: 使用最新的扩展标准
- **TypeScript**: 全面的类型支持
- **现代 React**: 使用最新的 React 19 特性
- **代码质量**: 集成 Biome 确保代码质量

## 支持的页面类型

| 页面类型 | URL 模式 | 支持功能 |
|---------|----------|----------|
| 笔记详情页 | `/explore/{noteId}` | ✅ 媒体下载 ✅ 文本提取 ✅ 作者信息 ✅ 字数统计 ✅ 评论提取 |
| 用户主页 | `/user/profile/{userId}` | 🚧 开发中 |
| 其他页面 | - | ❌ 不支持 |

## 开发指南

### 代码规范

项目使用 Biome 进行代码质量控制：

```bash
# 检查代码质量
pnpm check

# 自动修复问题  
pnpm check:fix

# 仅运行 linter
pnpm lint

# 仅运行格式化
pnpm format
```

### 提交规范

- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式调整
- refactor: 代码重构
- test: 测试相关
- chore: 构建/工具相关

## 许可证

GNU General Public License v3.0

本项目基于 GNU General Public License Version 3 (GPL-3.0) 开源许可证发布。详情请参阅 [LICENSE](LICENSE) 文件。

## 相关链接

- [WXT 文档](https://wxt.dev/)
- [Chrome Extensions 文档](https://developer.chrome.com/docs/extensions/)
- [React 文档](https://reactjs.org/)

---

**注意**: 本扩展仅用于个人学习和研究目的，请遵守小红书的服务条款和相关法律法规。
